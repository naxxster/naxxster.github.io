(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{144:function(e,t){},341:function(e,t,n){e.exports=n(976)},346:function(e,t,n){},348:function(e,t,n){},976:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(66),l=n.n(u),i=(n(346),n(68)),c=n.n(i),o=n(133),m=n(31),s=n(32),b=n(33),d=n(34),p=n(35),h=(n(348),n(44)),f=n.n(h),g={Auth:{region:"us-west-2",userPoolId:"us-west-2_uEZ8FEnAB",userPoolWebClientId:"2b8vlmnot2n9g8ilopdahte1c5",identityPoolId:"us-west-2:3aff22a8-3397-44c4-81ee-f7510948be34"},API:{graphql_endpoint:"https://d16ie2jd28d342.cloudfront.net/graphql"},Storage:{AWSS3:{bucket:"photagram-108331135934-us-west-2",region:"us-west-2"}}},O=n(93),j=n(991),E=n(992),v=n(986),y=n(989),I=n(55),k=n(988),A=n(987),$=n(993),w=n(134),S=n(60),C=n(79);f.a.configure(g),f.a.Logger.LOG_LEVEL="DEBUG";var P=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t)},n.handleSubmit=function(){var e=Object(o.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"mutation NewAlbum($name: String!) {\n      createAlbum(name: $name, userId: 1) {\n        id\n        name\n      }\n    }",e.next=4,h.API.graphql(Object(h.graphqlOperation)("mutation NewAlbum($name: String!) {\n      createAlbum(name: $name, userId: 1) {\n        id\n        name\n      }\n    }",{name:n.state.albumName}));case 4:a=e.sent,console.info("Created album with id ".concat(a.data.createAlbum.id));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={albumName:""},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(E.a,{as:"h3"},"Add a new album"),r.a.createElement(v.a,{type:"text",placeholder:"New Album Name",icon:"plus",iconPosition:"left",action:{content:"Create",onClick:this.handleSubmit},name:"albumName",value:this.state.albumName,onChange:this.handleChange}))}}]),t}(a.Component),x=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"albumItems",value:function(){return this.props.albums.sort(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n,a){if(!n.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var r="string"===typeof n[e]?n[e].toUpperCase():n[e],u="string"===typeof a[e]?a[e].toUpperCase():a[e],l=0;return r>u&&(l=1),r<u&&(l=-1),"desc"===t?-1*l:l}}("name")).map((function(e){return r.a.createElement(y.a.Item,{key:e.id},r.a.createElement(w.b,{to:"/albums/".concat(e.id)},e.name))}))}},{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(E.a,{as:"h3"},"My Albums"),r.a.createElement(y.a,{divided:!0,relaxed:!0},this.albumItems()))}}]),t}(a.Component),q=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(O.Connect,{query:Object(h.graphqlOperation)("query ListAlbums {\n  listAlbums {\n    id\n    name\n  }\n}")},(function(e){var t=e.data,n=e.loading,a=e.errors;return n?r.a.createElement("div",null,"Loading..."):a.length>0?r.a.createElement("h3",null,JSON.stringify(a)):t.listAlbums?r.a.createElement(x,{albums:t.listAlbums}):void 0}))}}]),t}(a.Component),N=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(O.Connect,{query:Object(h.graphqlOperation)("query GetAlbum($id: ID!) {\n  getAlbum(id: $id) {\n    id\n    name\n    members {\n      id\n      name\n    }\n    photos {\n      thumbnail\n    }\n  }\n}",{id:this.props.id})},(function(e){var t=e.data,n=e.loading,a=e.errors;return n?r.a.createElement("div",null,"Loading..."):a.length>0?r.a.createElement("div",null,JSON.stringify(a)):t.getAlbum?r.a.createElement(z,{album:t.getAlbum}):void 0}))}}]),t}(a.Component),U=function(e){return r.a.createElement("div",null,r.a.createElement(E.a,{as:"h4"},r.a.createElement(I.a,{name:"user circle"}),r.a.createElement(E.a.Content,null,"Members")),r.a.createElement(y.a,{bulleted:!0},e.members&&e.members.map((function(e){return r.a.createElement(y.a.Item,{key:e.id},e.name)}))))},z=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(E.a,{as:"h3"},this.props.album.name),r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(U,{members:this.props.album.members})),r.a.createElement(j.a,{basic:!0},r.a.createElement(L,{albumId:this.props.album.id}))),r.a.createElement(D,{albumId:this.props.album.id}),r.a.createElement(B,{photos:this.props.album.photos}))}}]),t}(a.Component),D=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(d.a)(t).call(this,e))).onChange=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],r=Object(C.v4)(),n.setState({uploading:!0}),e.next=5,h.Storage.put(r,a,{customPrefix:{public:"uploads/"},metadata:{albumid:n.props.albumId}});case 5:return u=e.sent,console.log("Uploaded file: ",u),n.setState({uploading:!1}),"mutation NewPhoto($content: String!, $albumId: ID!, $bucket: String!, $fullsize: String!, $thumbnail: String!) {\n      createPhoto(content: $content, albumId: $albumId, bucket: $bucket, fullsize: $fullsize, thumbnail: $thumbnail) {\n        id\n        content\n        bucket\n        fullsize\n        thumbnail\n      }\n    }",e.next=11,h.API.graphql(Object(h.graphqlOperation)("mutation NewPhoto($content: String!, $albumId: ID!, $bucket: String!, $fullsize: String!, $thumbnail: String!) {\n      createPhoto(content: $content, albumId: $albumId, bucket: $bucket, fullsize: $fullsize, thumbnail: $thumbnail) {\n        id\n        content\n        bucket\n        fullsize\n        thumbnail\n      }\n    }",{content:"",albumId:n.props.albumId,bucket:g.Storage.AWSS3.bucket,fullsize:"public/".concat(r),thumbnail:"public/resized/".concat(r)}));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={uploading:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k.a.Button,{onClick:function(){var e=document.getElementById("add-image-file-input");e&&e.click()},disabled:this.state.uploading,icon:"file image outline",content:this.state.uploading?"Uploading...":"Add Image"}),r.a.createElement("input",{id:"add-image-file-input",type:"file",accept:"image/*",onChange:this.onChange,style:{display:"none"}}))}}]),t}(a.Component),B=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"photoItems",value:function(){return this.props.photos.map((function(e){return r.a.createElement(O.S3Image,{key:e.thumbnail,imgKey:e.thumbnail.replace("public/",""),style:{display:"inline-block",paddingRight:"5px"}})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A.a,{hidden:!0}),this.photoItems())}}]),t}(a.Component),L=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){"username"===t.name&&n.setState({username:t.value})},n.handleSubmit=function(){var e=Object(o.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"\n      mutation AddUsernameToAlbum($username: String!, $albumId: ID!) {\n        addUsernameToAlbum(username: $username, albumId: $albumId) {\n          id\n        }\n      }\n    ",e.next=4,h.API.graphql(Object(h.graphqlOperation)("\n      mutation AddUsernameToAlbum($username: String!, $albumId: ID!) {\n        addUsernameToAlbum(username: $username, albumId: $albumId) {\n          id\n        }\n      }\n    ",{username:n.state.username,albumId:n.props.albumId}));case 4:a=e.sent,console.log("Added ".concat(n.state.username," to album id ").concat(a.data.addUsernameToAlbum.id)),n.setState({username:""});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={username:""},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,{type:"text",placeholder:"Username",icon:"user plus",iconPosition:"left",action:{content:"Add",onClick:this.handleSubmit},name:"username",value:this.state.username,onChange:this.handleChange})}}]),t}(a.Component),T=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement($.a,{padded:!0},r.a.createElement($.a.Column,null,r.a.createElement(S.a,{path:"/",exact:!0,component:P}),r.a.createElement(S.a,{path:"/",exact:!0,component:q}),r.a.createElement(S.a,{path:"/albums/:albumId",render:function(){return r.a.createElement("div",null,r.a.createElement(w.b,{to:"/"},"Back to Albums list"))}}),r.a.createElement(S.a,{path:"/albums/:albumId",render:function(e){return r.a.createElement(N,{id:e.match.params.albumId})}}))))}}]),t}(a.Component),W=Object(O.withAuthenticator)(T,!0);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[341,1,2]]]);
//# sourceMappingURL=main.e0cf4b26.chunk.js.map